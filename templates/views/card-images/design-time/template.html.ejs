<%#
%>

<div >
    <span style="font-size: 200%; font-weight: bold;">Datasource Fields:&nbsp;</span>
    <span style="font-size: 140%">You can map these fields to card elements</span>
</div>
<table style="margin-left: 1rem;">
    <tr style="background-color: #3fd5d5; font-weight: bold; ">
        <td style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
                <span style="margin-left: 0.8rem; margin-right: 0.8rem;">
                    Labels:
                </span>
        </td>
        <% myDataSrcFields.forEach(field => { %>
        <td style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
                <span style="margin-left: 0.8rem; margin-right: 0.8rem;">
                    <%- field.label %>
                </span>
        </td>
        <% })%>
    </tr>
    <tr style="background-color: #3fd5d5; font-weight: bold; ">
        <td style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
                <span style="margin-left: 0.8rem; margin-right: 0.8rem;">
                    Names:
                </span>
        </td>
        <% myDataSrcFields.forEach(field => { %>
        <td style="padding-top: 0.5rem; padding-bottom: 0.5rem;">
                <span style="margin-left: 0.8rem; margin-right: 0.8rem;">
                    <%- field.name %>
                </span>
        </td>
        <% })%>
    </tr>
</table>
<div style="border-bottom: 2px solid black; height: 10px;">
</div>

<div style="margin: 2rem;">
    <h2><%- title %></h2>
</div>

<style>
    .cardContainer {
        width: 100%;
        /*max-width: 1240px;*/
        /*margin-left: 5%;*/
        /*margin-right: 5%;*/
        text-align: <%- cardsContainerStyling.alignment %>;
        <% if ( cardsContainerStyling.addCss ) { %>
            <%- cardsContainerStyling.addCss %>
        <% } %>
    }

    /*
    Compared to display: inline, the major difference is that display: inline-block allows to set a width and height on the element.
    Also, with display: inline-block, the top and bottom margins/paddings are respected, but with display: inline they are not.
    Compared to display: block, the major difference is that display: inline-block does not add a line-break after the element, so the element can sit next to other elements.
    */
    .card-image {
        text-align: <%- cardsStyling.alignment %>;
        display: inline-block;
        /*border: solid 2px black;*/
        width: <%- cardsStyling.width %>px;
        height: <%- cardsStyling.height %>px;
        margin: <%- cardsStyling.margin %>px;
        padding: <%- cardsStyling.padding %>px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        <% if ( cardsStyling.fgColor ) { %>
        color: <%- cardsStyling.fgColor %>;
        <% } %>
        <% if ( cardsStyling.bgColor ) { %>
        background-color: <%- cardsStyling.bgColor %>;
        <% } %>
        <% if ( cardsStyling.addCss ) { %>
            <%- cardsStyling.addCss %>
        <% } %>
    }

    .fieldContainer {
        margin-top: <%- fieldContainer.topMargin %>px;
        margin-bottom: <%- fieldContainer.bottomMargin %>px;
    }

    .field1 {
        <%- cardsData.fieldsStyles.field1 %>
    }

    .field2 {
        <%- cardsData.fieldsStyles.field2 %>
    }

    .field3 {
        <%- cardsData.fieldsStyles.field3 %>
    }

    .field4 {
        <%- cardsData.fieldsStyles.field4 %>
    }

    .field5 {
        <%- cardsData.fieldsStyles.field5 %>
    }
</style>

<%#- include('./Card_.html', { viewDataSources: view.viewDataSources }); -%>

<div class="cardContainer" dir="ltr">
    <!-- grid item, containing a card -->
    <% for ( let i=0; i<10; i++ ) { %>
        <div class="card-image">
        <% if ( ! (cardsData.fieldsMapping.field1 || cardsData.fieldsMapping.field2 || cardsData.fieldsMapping.field3 || cardsData.fieldsMapping.field4 || cardsData.fieldsMapping.field5 ) ) { %>
        <div class="fieldContainer field1">To render content, map fields from your data source</div>
        <% } else { %>
            <% if ( !cardsData.cardName || cardsData.cardName === "" || cardsData.cardName === "Image and Name" ) { %>
                <% if ( cardsData.fieldsMapping.field1 ) { %>
                <div class="fieldContainer field1">
                    <img class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field1 %>" width="100%" src="https://raw.githubusercontent.com/thierryciot/kendoui-builder-template-samples/master/Photos/Barbados.jpg"></img>
                </div>
                <% } %>
                <% if ( cardsData.fieldsMapping.field2 ) { %>
                <div class="fieldContainer field2">
                    <% if ( cardsData.fieldsLabel.field2 ) { %>
                    <span class="fieldLabel"><%- myDataSrcFieldsLabelMap[cardsData.fieldsMapping.field2] %></span>
                    <span class="fieldSeparator">:&nbsp;</span>
                    <% } %>
                    <% if ( cardsData.fieldsIcon.field2 ) { %>
                    <i class="fa <%- cardsData.fieldsIcon.field2 %>"></i>
                    <% } %>
                    <span class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field2 %>"><%- mySampleData[i][cardsData.fieldsMapping.field2] %></span>
                </div>
                <% } %>
            <% } else if ( cardsData.cardName === "Image, price and name" ) { %>
                <% if ( cardsData.fieldsMapping.field1 ) { %>
                <div class="fieldContainer field1">
                    <img class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field1 %>" width="100%" src="https://raw.githubusercontent.com/thierryciot/kendoui-builder-template-samples/master/Photos/Barbados.jpg"></img>
                </div>
                <% } %>
                <table width="100%">
                    <tr>
                    <td with="50%">
                        <% if ( cardsData.fieldsMapping.field2 ) { %>
                            <div class="fieldContainer field2">
                                <% if ( cardsData.fieldsIcon.field2 ) { %>
                                    <i class="fa <%- cardsData.fieldsIcon.field2 %>"></i>
                                <% } %>
                                <span class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field2 %>"><%- mySampleData[i][cardsData.fieldsMapping.field2] %></span>
                            </div>
                        <% } %>
                    </td>
                    <td with="50%" align="right">
                        <% if ( cardsData.fieldsMapping.field3 ) { %>
                            <div class="fieldContainer field3">
                                <% if ( cardsData.fieldsIcon.field3 ) { %>
                                <i class="fa <%- cardsData.fieldsIcon.field3 %>"></i>
                                <% } %>
                                <span class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field3 %>"><%- mySampleData[i][cardsData.fieldsMapping.field3] %></span>
                            </div>
                        <% } %>
                    </td>
                    </tr>
                </table>
            <% } else if ( cardsData.cardName === "Image, name and description" ) { %>
                <% if ( cardsData.fieldsMapping.field1 ) { %>
                <div class="fieldContainer field1">
                    <img class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field1 %>" width="100%" src="https://raw.githubusercontent.com/thierryciot/kendoui-builder-template-samples/master/Photos/Barbados.jpg"></img>
                </div>
                <% } %>
                <% if ( cardsData.fieldsMapping.field2 ) { %>
                <div class="fieldContainer field2">
                    <% if ( cardsData.fieldsIcon.field2 ) { %>
                        <i class="fa <%- cardsData.fieldsIcon.field2 %>"></i>
                    <% } %>
                    <span class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field2 %>"><%- mySampleData[i][cardsData.fieldsMapping.field2] %></span>
                </div>
                <% } %>
                <% if ( cardsData.fieldsMapping.field4 ) { %>
                <div class="fieldContainer field4">
                    <% if ( cardsData.fieldsIcon.field4 ) { %>
                        <i class="fa <%- cardsData.fieldsIcon.field4 %>"></i>
                    <% } %>
                    <span class="fieldValue" title="Data source field: <%- cardsData.fieldsMapping.field4 %>"><%- mySampleData[i][cardsData.fieldsMapping.field4] %></span>
                </div>
                <% } %>
            <% } %>
        <% } %>
        </div>
    <% } %>
</div>
<%#
    we recommend to show an image of the typical representation of the custom view
%>
<!-- TBD: Need a property with path to design time -->
<!--<img src="./templates/views/custom-simple-list-ds/design-time/simpleListDesignTimePreview.png"/>-->


<% if ( outputDebugData ) { %>
<div style="margin: 2rem; padding: 1.5rem; border: solid 1px olivedrab; width: 900px;">
    <h4>Debug Output</h4>
    <div style="padding: 1.5rem;">
        <% if ( dataProvider ) { %>
            Data Provider: <%- dataProvider %>
        <% } else { %>
            No Data Provider Selected
        <% } %>
        <br/>

        <% if ( dataSource ) { %>
            Data Source: <%- dataSource %>
        <% } else { %>
            No Data Source Selected
        <% } %>
        <br/>

        Current directory: <%- dirName %>
        <br/>

        Card name: <%- cardsData.cardName %>
        <br/>

        Directory with data provider metadata: <%- pathToDataProviderFile %>
        <br/>

        Number of fields from REST: <%- myDataSrcFields.length %>
        <br/>

        Number of sample data items: <%- mySampleData.length %>
    </div>
</div>
<% } %>
